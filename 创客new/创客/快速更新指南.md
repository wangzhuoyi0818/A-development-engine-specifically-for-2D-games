# ğŸ”„ ä¸‡è±¡ç§¯æœ¨ - å¿«é€Ÿæ›´æ–°è„šæœ¬

## åœ¨ AutoDL æœåŠ¡å™¨ä¸Šè¿è¡Œæ­¤å‘½ä»¤æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
# ========================================
# ä¸‡è±¡ç§¯æœ¨ - å¿«é€Ÿæ›´æ–°
# ========================================

echo "ğŸ”„ å¼€å§‹æ›´æ–°ä¸‡è±¡ç§¯æœ¨..."

# 1. æ£€æŸ¥æ–°æ–‡ä»¶
if [ ! -f "/root/wanxiang-blocks.tar.gz" ]; then
    echo "âŒ æœªæ‰¾åˆ°æ–°ç‰ˆæœ¬æ–‡ä»¶: /root/wanxiang-blocks.tar.gz"
    echo "è¯·å…ˆä¸Šä¼ æ–°çš„å‹ç¼©åŒ…åˆ° /root/ ç›®å½•"
    exit 1
fi

# 2. å¤‡ä»½æ—§ç‰ˆæœ¬
if [ -d "/root/wanxiang" ]; then
    echo "ğŸ’¾ å¤‡ä»½æ—§ç‰ˆæœ¬..."
    mv /root/wanxiang /root/wanxiang_backup_$(date +%Y%m%d_%H%M%S)
fi

# 3. åˆ›å»ºæ–°ç›®å½•
mkdir -p /root/wanxiang
cd /root/wanxiang

# 4. è§£å‹æ–°ç‰ˆæœ¬
echo "ğŸ“¦ è§£å‹æ–°ç‰ˆæœ¬..."
tar -xzf /root/wanxiang-blocks.tar.gz

# 5. éªŒè¯æ–‡ä»¶
if [ ! -f "index.html" ]; then
    echo "âŒ è§£å‹å¤±è´¥ï¼Œæ¢å¤æ—§ç‰ˆæœ¬"
    rm -rf /root/wanxiang
    mv /root/wanxiang_backup_* /root/wanxiang 2>/dev/null || true
    exit 1
fi

echo "âœ… æ–°ç‰ˆæœ¬æ–‡ä»¶å°±ç»ª"

# 6. é‡å¯æœåŠ¡
echo "ğŸ”„ é‡å¯æœåŠ¡..."
pm2 restart wanxiang

# 7. ç­‰å¾…å¯åŠ¨
sleep 2

echo ""
echo "=========================================="
echo "âœ… æ›´æ–°å®Œæˆï¼"
echo "=========================================="
echo ""

pm2 status

echo ""
echo "ğŸŒ è®¿é—®åœ°å€ï¼š"
echo "https://u812392-b4f4-d1b0eded.bjb1.seetacloud.com:8443"
echo ""
echo "ğŸ’¡ å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ¢å¤æ—§ç‰ˆæœ¬ï¼š"
echo "rm -rf /root/wanxiang && mv /root/wanxiang_backup_* /root/wanxiang && pm2 restart wanxiang"
echo ""
```

## ğŸ“‹ æ›´æ–°æ­¥éª¤

1. **æœ¬åœ°é‡æ–°æ„å»º**
   ```bash
   npm run build
   tar -czf wanxiang-blocks.tar.gz -C dist .
   ```

2. **ä¸Šä¼ æ–°æ–‡ä»¶**
   - åœ¨ JupyterLab ä¸Šä¼  `wanxiang-blocks.tar.gz`
   - è¦†ç›– `/root/` ç›®å½•ä¸‹çš„æ—§æ–‡ä»¶

3. **è¿è¡Œæ›´æ–°è„šæœ¬**
   - åœ¨ç»ˆç«¯å¤åˆ¶ç²˜è´´ä¸Šé¢çš„è„šæœ¬
   - ç­‰å¾…å®Œæˆ

4. **æµ‹è¯•è®¿é—®**
   - æ‰“å¼€æµè§ˆå™¨ï¼Œæ¸…é™¤ç¼“å­˜ï¼ˆCtrl+Shift+Rï¼‰
   - è®¿é—®ï¼šhttps://u812392-b4f4-d1b0eded.bjb1.seetacloud.com:8443
   - éªŒè¯æ–°åŠŸèƒ½

---

## ğŸ”™ å›æ»šåˆ°æ—§ç‰ˆæœ¬

å¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼š

```bash
# åœæ­¢æœåŠ¡
pm2 stop wanxiang

# åˆ é™¤æ–°ç‰ˆæœ¬
rm -rf /root/wanxiang

# æ¢å¤æœ€è¿‘çš„å¤‡ä»½
mv /root/wanxiang_backup_* /root/wanxiang

# é‡å¯æœåŠ¡
pm2 restart wanxiang
```

---

## ğŸ’¡ å¼€å‘å»ºè®®

### æœ¬åœ°å¼€å‘
```bash
# æœ¬åœ°è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:3000
```

### æ„å»ºæµ‹è¯•
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æœ¬åœ°é¢„è§ˆæ„å»ºç»“æœ
npm run preview

# è®¿é—® http://localhost:4173
```

### å¿«é€Ÿéƒ¨ç½²
```bash
# ä¸€é”®æ„å»ºå¹¶æ‰“åŒ…
npm run build && tar -czf wanxiang-blocks.tar.gz -C dist .

# ç„¶åä¸Šä¼  wanxiang-blocks.tar.gz åˆ°æœåŠ¡å™¨
```
