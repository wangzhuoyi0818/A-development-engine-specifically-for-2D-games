# GDevelop 游戏平台改造方案

## 项目概述

基于 GDevelop 开源游戏引擎，改造为以"游戏项目"为核心的游戏开发平台。

### 改造目标
1. **界面重组** - 采用"项目为中心"的布局
2. **多维度分类** - 支持游戏类型、项目、资源类型、自定义标签
3. **优化工作流** - 简化游戏开发流程

---

## 一、界面布局改造

### 1.1 新布局结构

```
┌─────────────────────────────────────────────────────────────┐
│                     顶部工具栏                                │
│  [Logo] [项目名称]  [保存] [预览] [导出] [设置] [用户]        │
├──────────┬──────────────────────────────────┬────────────────┤
│          │                                  │                │
│  项目    │        主编辑区域                 │   素材面板     │
│  导航    │                                  │                │
│  面板    │   - 场景编辑器                    │   - 资源库     │
│          │   - 事件编辑器                    │   - 对象列表   │
│  [游戏]  │   - 对象编辑器                    │   - 图层管理   │
│  ├─场景  │   - 资源管理器                    │   - 属性面板   │
│  ├─对象  │                                  │                │
│  ├─事件  │                                  │   [分类筛选]   │
│  ├─资源  │                                  │   - 游戏类型   │
│  └─设置  │                                  │   - 资源类型   │
│          │                                  │   - 自定义标签 │
│  [分类]  │                                  │                │
│  ├─动作  │                                  │                │
│  ├─休闲  │                                  │                │
│  ├─益智  │                                  │                │
│  └─其他  │                                  │                │
│          │                                  │                │
└──────────┴──────────────────────────────────┴────────────────┘
```

### 1.2 三栏布局说明

#### 左侧：项目导航面板（宽度：250-300px）
- **当前项目树**
  - 场景列表
  - 对象列表
  - 事件表列表
  - 资源列表
  - 项目设置

- **项目分类管理**
  - 按游戏类型分类
  - 最近打开的项目
  - 收藏的项目
  - 自定义分类

#### 中间：主编辑区域（自适应宽度）
- 标签页式编辑器
- 支持多个编辑器同时打开
- 编辑器类型：
  - 场景编辑器（可视化布局）
  - 事件编辑器（逻辑编程）
  - 对象编辑器（精灵、3D模型等）
  - 资源管理器

#### 右侧：素材面板（宽度：300-350px，可折叠）
- **资源库**
  - 图片资源
  - 音频资源
  - 3D模型
  - 字体资源

- **对象列表**
  - 当前场景对象
  - 全局对象

- **属性面板**
  - 选中对象的属性
  - 行为配置

- **分类筛选器**
  - 按游戏类型筛选
  - 按资源类型筛选
  - 按自定义标签筛选

---

## 二、游戏项目分类管理系统

### 2.1 数据模型

#### 游戏项目元数据
```javascript
{
  "projectId": "unique-id",
  "name": "我的游戏",
  "description": "游戏描述",
  "thumbnail": "path/to/thumbnail.png",
  "gameType": "action", // 游戏类型
  "tags": ["2D", "像素风", "平台跳跃"], // 自定义标签
  "createdAt": "2026-01-23T00:00:00Z",
  "updatedAt": "2026-01-23T00:00:00Z",
  "lastOpened": "2026-01-23T00:00:00Z",
  "favorite": false,
  "category": "我的项目", // 自定义分类
  "resources": {
    "images": 50,
    "audio": 20,
    "models3D": 5
  }
}
```

#### 游戏类型分类
```javascript
const GAME_TYPES = {
  action: { name: "动作游戏", icon: "⚔️", color: "#FF5722" },
  puzzle: { name: "益智游戏", icon: "🧩", color: "#9C27B0" },
  casual: { name: "休闲游戏", icon: "🎮", color: "#4CAF50" },
  adventure: { name: "冒险游戏", icon: "🗺️", color: "#2196F3" },
  strategy: { name: "策略游戏", icon: "♟️", color: "#FF9800" },
  rpg: { name: "角色扮演", icon: "🎭", color: "#E91E63" },
  simulation: { name: "模拟游戏", icon: "🏗️", color: "#00BCD4" },
  sports: { name: "体育游戏", icon: "⚽", color: "#8BC34A" },
  other: { name: "其他", icon: "📦", color: "#9E9E9E" }
};
```

#### 资源分类
```javascript
const RESOURCE_TYPES = {
  image: { name: "图片", icon: "🖼️", extensions: [".png", ".jpg", ".jpeg", ".webp"] },
  audio: { name: "音频", icon: "🔊", extensions: [".mp3", ".wav", ".ogg"] },
  model3D: { name: "3D模型", icon: "🎲", extensions: [".glb", ".gltf"] },
  video: { name: "视频", icon: "🎬", extensions: [".mp4", ".webm"] },
  font: { name: "字体", icon: "🔤", extensions: [".ttf", ".otf"] },
  json: { name: "数据", icon: "📄", extensions: [".json"] },
  tilemap: { name: "瓦片地图", icon: "🗺️", extensions: [".json", ".ldtk", ".tmj"] }
};
```

### 2.2 核心功能

#### 功能1：项目分类管理
- 创建自定义分类文件夹
- 拖拽项目到不同分类
- 批量移动项目
- 分类重命名和删除

#### 功能2：智能标签系统
- 自动标签建议（基于项目内容）
- 手动添加/删除标签
- 标签搜索和筛选
- 标签云展示

#### 功能3：资源关联管理
- 查看项目使用的所有资源
- 资源去重和优化
- 未使用资源检测
- 资源批量导入/导出

#### 功能4：项目模板系统
- 按游戏类型提供模板
- 保存当前项目为模板
- 模板市场（可选）

---

## 三、技术实现方案

### 3.1 技术栈

- **前端框���**: React 16.14.0
- **UI 组件库**: Material-UI 4.11.0
- **状态管理**: React Context + Hooks
- **数据持久化**: LocalStorage / IndexedDB
- **拖拽功能**: react-beautiful-dnd
- **图标库**: Material Icons + 自定义 SVG

### 3.2 核心组件架构

```
src/
├── GameProjectManager/           # 游戏项目管理器
│   ├── ProjectNavigator/         # 项目导航面板
│   │   ├── ProjectTree.js        # 项目树组件
│   │   ├── CategoryList.js       # 分类列表
│   │   └── ProjectCard.js        # 项目卡片
│   ├── CategoryManager/          # 分类管理器
│   │   ├── CategoryDialog.js     # 分类对话框
│   │   ├── GameTypeSelector.js   # 游戏类型选择器
│   │   └── TagManager.js         # 标签管理器
│   ├── ResourceClassifier/       # 资源分类器
│   │   ├── ResourceFilter.js     # 资源筛选器
│   │   ├── ResourceGrid.js       # 资源网格视图
│   │   └── ResourceList.js       # 资源列表视图
│   └── ProjectMetadata/          # 项目元数据
│       ├── MetadataEditor.js     # 元数据编辑器
│       └── MetadataStorage.js    # 元数据存储
├── NewLayout/                    # 新布局组件
│   ├── ThreeColumnLayout.js      # 三栏布局
│   ├── LeftPanel.js              # 左侧面板
│   ├── CenterPanel.js            # 中间面板
│   └── RightPanel.js             # 右侧面板
└── Utils/
    ├── ProjectClassifier.js      # 项目分类工具
    ├── ResourceAnalyzer.js       # 资源分析工具
    └── TagSuggester.js           # 标签建议工具
```

### 3.3 数据存储方案

#### 方案1：LocalStorage（简单项目）
```javascript
// 存储项目元数据
localStorage.setItem('gameProjects', JSON.stringify(projects));
localStorage.setItem('categories', JSON.stringify(categories));
localStorage.setItem('tags', JSON.stringify(tags));
```

#### 方案2：IndexedDB（大型项目）
```javascript
// 使用 IndexedDB 存储大量数据
const db = await openDB('GameProjectDB', 1, {
  upgrade(db) {
    db.createObjectStore('projects', { keyPath: 'projectId' });
    db.createObjectStore('categories', { keyPath: 'categoryId' });
    db.createObjectStore('resources', { keyPath: 'resourceId' });
  }
});
```

---

## 四、实施步骤

### 阶段1：基础架构（1-2周）
1. ✅ 创建项目目录结构
2. ✅ 设计数据模型
3. ⬜ 实现三栏布局组件
4. ⬜ 集成到 MainFrame

### 阶段2：项目管理（2-3周）
1. ⬜ 实现项目导航面板
2. ⬜ 实现分类管理功能
3. ⬜ 实现项目元数据编辑
4. ⬜ 实现项目搜索和筛选

### 阶段3：资源分类（2-3周）
1. ⬜ 实现资源分类器
2. ⬜ 实现资源筛选功能
3. ⬜ 实现资源关联管理
4. ⬜ 实现资源分析工具

### 阶段4：标签系统（1-2周）
1. ⬜ 实现标签管理器
2. ⬜ 实现标签建议功能
3. ⬜ 实现标签搜索
4. ⬜ 实现标签云展示

### 阶段5：优化和测试（1-2周）
1. ⬜ 性能优化
2. ⬜ 用户体验优化
3. ⬜ 功能测试
4. ⬜ 文档编写

---

## 五、关键文件修改清单

### 5.1 需要修改的核心文件

1. **MainFrame/index.js**
   - 集成新的三栏布局
   - 添加项目导航面板
   - 添加素材面板

2. **MainFrame/EditorTabsPane.js**
   - 调整编辑器标签页布局
   - 适配新的中间面板

3. **ProjectManager/index.js**
   - 添加项目分类功能
   - 集成项目元数据管理

4. **ResourcesList/ResourceSource.js**
   - 添加资源分类功能
   - 实现资源筛选

5. **MainFrame/Preferences/PreferencesContext.js**
   - 添加布局偏好设置
   - 添加分类偏好设置

### 5.2 需要创建的新文件

详见"三、技术实现方案 - 3.2 核心组件架构"

---

## 六、用户体验优化

### 6.1 快捷操作
- **Ctrl+P**: 快速打开项目
- **Ctrl+Shift+F**: 全局搜索资源
- **Ctrl+T**: 切换标签
- **Ctrl+B**: 切换左侧面板
- **Ctrl+Shift+B**: 切换右侧面板

### 6.2 拖拽功能
- 拖拽项目到分类文件夹
- 拖拽资源到场景编辑器
- 拖拽对象到对象列表
- 拖拽标签到项目

### 6.3 视觉反馈
- 项目卡片悬停效果
- 分类文件夹展开/折叠动画
- 资源加载进度条
- 操作成功/失败提示

---

## 七、兼容性说明

### 7.1 向后兼容
- 保持 GDevelop 原有项目格式
- 元数据存储在独立文件中
- 不影响现有项目的打开和编辑

### 7.2 数据迁移
- 自动检测旧项目
- 提示用户添加分类信息
- 批量导入现有项目

---

## 八、未来扩展

### 8.1 云同步（可选）
- 项目云端备份
- 多设备同步
- 团队协作功能

### 8.2 AI 辅助（可选）
- 智能标签建议
- 资源推荐
- 项目模板生成

### 8.3 社区功能（可选）
- 项目分享
- 模板市场
- 资源市场

---

## 九、总结

本改造方案保留了 GDevelop 的所有核心功能，重点在于：
1. **界面重组** - 更符合游戏开发工作流
2. **分类管理** - 多维度的项目和资源管理
3. **用户体验** - 简化操作，提高效率

通过这些改造，平台将更加专注于游戏开发，为用户提供更好的开发体验。
