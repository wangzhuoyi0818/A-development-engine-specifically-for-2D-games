# å¿«é€Ÿå¼€å§‹æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£å’Œä½¿ç”¨ GDevelop æ¸¸æˆå¹³å°æ”¹é€ é¡¹ç›®ã€‚

## å‰ç½®è¦æ±‚

- Node.js 14+
- ç†Ÿæ‚‰ React å’Œ Material-UI
- äº†è§£ GDevelop é¡¹ç›®ç»“æ„

## ç¬¬ä¸€æ­¥ï¼šäº†è§£é¡¹ç›®ç»“æ„

### æ ¸å¿ƒç»„ä»¶

1. **ThreeColumnLayout** - ä¸‰æ å¸ƒå±€ç»„ä»¶
2. **ProjectNavigator** - é¡¹ç›®å¯¼èˆªé¢æ¿
3. **ResourcePanel** - èµ„æºé¢æ¿
4. **MetadataStorage** - å…ƒæ•°æ®å­˜å‚¨ç®¡ç†å™¨

### å·¥å…·ç±»

1. **ProjectClassifier** - é¡¹ç›®åˆ†ç±»å·¥å…·
2. **ResourceAnalyzer** - èµ„æºåˆ†æå·¥å…·

## ç¬¬äºŒæ­¥ï¼šç†è§£æ•°æ®æ¨¡å‹

### é¡¹ç›®å…ƒæ•°æ®

```javascript
{
  projectId: "unique-id",
  name: "æˆ‘çš„æ¸¸æˆ",
  description: "æ¸¸æˆæè¿°",
  thumbnail: "path/to/thumbnail.png",
  gameType: "action",  // æ¸¸æˆç±»å‹
  tags: ["2D", "åƒç´ é£"],  // æ ‡ç­¾
  createdAt: "2026-01-23T00:00:00Z",
  updatedAt: "2026-01-23T00:00:00Z",
  lastOpened: "2026-01-23T00:00:00Z",
  favorite: false,
  category: "æˆ‘çš„é¡¹ç›®",
  resources: {
    images: 50,
    audio: 20,
    models3D: 5
  },
  projectPath: "/path/to/project"
}
```

## ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨å…ƒæ•°æ®å­˜å‚¨

### ä¿å­˜é¡¹ç›®å…ƒæ•°æ®

```javascript
import MetadataStorage from './GameProjectManager/ProjectMetadata/MetadataStorage';

// åˆ›å»ºæ–°é¡¹ç›®å…ƒæ•°æ®
const projectMetadata = {
  projectId: `project_${Date.now()}`,
  name: "æˆ‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆ",
  description: "è¿™æ˜¯ä¸€ä¸ªåŠ¨ä½œæ¸¸æˆ",
  gameType: "action",
  tags: ["2D", "å¹³å°è·³è·ƒ"],
  createdAt: new Date().toISOString(),
  updatedAt: new Date().toISOString(),
  lastOpened: new Date().toISOString(),
  favorite: false,
  category: "æˆ‘çš„é¡¹ç›®",
  resources: {
    images: 0,
    audio: 0,
    models3D: 0,
    videos: 0,
    fonts: 0,
    other: 0
  },
  projectPath: "/path/to/project"
};

// ä¿å­˜
MetadataStorage.saveProject(projectMetadata);

// è·å–æ‰€æœ‰é¡¹ç›®
const allProjects = MetadataStorage.getAllProjects();

// è·å–å•ä¸ªé¡¹ç›®
const project = MetadataStorage.getProject(projectId);

// æ›´æ–°æœ€åæ‰“å¼€æ—¶é—´
MetadataStorage.updateLastOpened(projectId);

// åˆ‡æ¢æ”¶è—çŠ¶æ€
MetadataStorage.toggleFavorite(projectId);
```

### ç®¡ç†åˆ†ç±»

```javascript
// è·å–æ‰€æœ‰åˆ†ç±»
const categories = MetadataStorage.getAllCategories();

// åˆ›å»ºæ–°åˆ†ç±»
const newCategory = {
  categoryId: `cat_${Date.now()}`,
  name: "æˆ‘çš„åˆ†ç±»",
  icon: "ğŸ“",
  color: "#2196F3",
  order: 0
};
MetadataStorage.saveCategory(newCategory);

// åˆ é™¤åˆ†ç±»
MetadataStorage.deleteCategory(categoryId);
```

### ç®¡ç†æ ‡ç­¾

```javascript
// è·å–æ‰€æœ‰æ ‡ç­¾
const tags = MetadataStorage.getAllTags();

// æ›´æ–°æ ‡ç­¾è®¡æ•°
MetadataStorage.updateTagCount("2D", 1);  // å¢åŠ 
MetadataStorage.updateTagCount("2D", -1); // å‡å°‘
```

## ç¬¬å››æ­¥ï¼šä½¿ç”¨é¡¹ç›®åˆ†ç±»å·¥å…·

```javascript
import ProjectClassifier from './Utils/ProjectClassifier';

const projects = MetadataStorage.getAllProjects();

// ç­›é€‰é¡¹ç›®
const filtered = ProjectClassifier.filterProjects(projects, {
  gameTypes: ['action', 'adventure'],
  tags: ['2D'],
  favorite: true,
  searchText: 'æ¸¸æˆ'
});

// æ’åºé¡¹ç›®
const sorted = ProjectClassifier.sortProjects(projects, 'lastOpened', false);

// è·å–æœ€è¿‘æ‰“å¼€çš„é¡¹ç›®
const recent = ProjectClassifier.getRecentProjects(projects, 5);

// è·å–æ”¶è—çš„é¡¹ç›®
const favorites = ProjectClassifier.getFavoriteProjects(projects);

// è·å–é¡¹ç›®ç»Ÿè®¡
const stats = ProjectClassifier.getProjectStats(projects);
console.log(`æ€»é¡¹ç›®æ•°: ${stats.total}`);
console.log(`æ”¶è—æ•°: ${stats.favorites}`);
console.log(`æ‰€æœ‰æ ‡ç­¾:`, stats.allTags);

// å»ºè®®æ ‡ç­¾
const suggestedTags = ProjectClassifier.suggestTags(projects, currentProject);
```

## ç¬¬äº”æ­¥ï¼šä½¿ç”¨èµ„æºåˆ†æå·¥å…·

```javascript
import ResourceAnalyzer from './Utils/ResourceAnalyzer';

// åˆ†æé¡¹ç›®èµ„æºï¼ˆéœ€è¦ GDevelop é¡¹ç›®å¯¹è±¡ï¼‰
const analysis = ResourceAnalyzer.analyzeProjectResources(gdProject);
console.log(`å›¾ç‰‡: ${analysis.images}`);
console.log(`éŸ³é¢‘: ${analysis.audio}`);
console.log(`3Dæ¨¡å‹: ${analysis.models3D}`);

// æŸ¥æ‰¾æœªä½¿ç”¨çš„èµ„æº
const unused = ResourceAnalyzer.findUnusedResources(gdProject);
console.log('æœªä½¿ç”¨çš„èµ„æº:', unused);

// æŸ¥æ‰¾é‡å¤çš„èµ„æº
const duplicates = ResourceAnalyzer.findDuplicateResources(gdProject);
console.log('é‡å¤çš„èµ„æº:', duplicates);

// ç”Ÿæˆèµ„æºæŠ¥å‘Š
const report = ResourceAnalyzer.generateResourceReport(gdProject);
console.log(report);

// è·å–ä¼˜åŒ–å»ºè®®
const suggestions = ResourceAnalyzer.getOptimizationSuggestions(gdProject);
suggestions.forEach(suggestion => {
  console.log(suggestion.message);
});
```

## ç¬¬å…­æ­¥ï¼šé›†æˆåˆ° GDevelop

### 1. å¤åˆ¶æ–‡ä»¶

å°† `src/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° GDevelop é¡¹ç›®çš„ `newIDE/app/src/` ç›®å½•ä¸‹ã€‚

### 2. ä¿®æ”¹ MainFrame

åœ¨ `newIDE/app/src/MainFrame/index.js` ä¸­ï¼š

```javascript
import ThreeColumnLayout from '../NewLayout/ThreeColumnLayout';
import ProjectNavigator from '../GameProjectManager/ProjectNavigator/ProjectNavigator';
import ResourcePanel from '../NewLayout/ResourcePanel';
import MetadataStorage from '../GameProjectManager/ProjectMetadata/MetadataStorage';

// åœ¨ MainFrame ç»„ä»¶ä¸­
const [leftPanelOpen, setLeftPanelOpen] = React.useState(true);
const [rightPanelOpen, setRightPanelOpen] = React.useState(true);
const [projects, setProjects] = React.useState([]);
const [categories, setCategories] = React.useState([]);

React.useEffect(() => {
  // åŠ è½½é¡¹ç›®å…ƒæ•°æ®
  setProjects(MetadataStorage.getAllProjects());
  setCategories(MetadataStorage.getAllCategories());
}, []);

// æ¸²æŸ“
return (
  <ThreeColumnLayout
    leftPanel={
      <ProjectNavigator
        projects={projects}
        categories={categories}
        selectedProjectId={currentProject?.projectId}
        onProjectSelect={handleProjectSelect}
        onProjectFavorite={handleProjectFavorite}
        onCategoryAdd={handleCategoryAdd}
        onCategoryEdit={handleCategoryEdit}
      />
    }
    centerPanel={
      <EditorTabsPane {...editorProps} />
    }
    rightPanel={
      <ResourcePanel
        resourcesTab={<ResourcesList />}
        objectsTab={<ObjectsList />}
        layersTab={<LayersList />}
        propertiesTab={<PropertiesPanel />}
        currentTab={currentTab}
        onTabChange={setCurrentTab}
        filterOptions={filterOptions}
        onFilterChange={setFilterOptions}
        viewMode={viewMode}
        onViewModeChange={setViewMode}
      />
    }
    leftPanelOpen={leftPanelOpen}
    rightPanelOpen={rightPanelOpen}
    onLeftPanelToggle={() => setLeftPanelOpen(!leftPanelOpen)}
    onRightPanelToggle={() => setRightPanelOpen(!rightPanelOpen)}
  />
);
```

### 3. åŒæ­¥é¡¹ç›®å…ƒæ•°æ®

å½“æ‰“å¼€é¡¹ç›®æ—¶ï¼ŒåŒæ­¥å…ƒæ•°æ®ï¼š

```javascript
const handleProjectOpen = (gdProject) => {
  const projectPath = gdProject.getProjectFile();
  let metadata = MetadataStorage.getProject(projectPath);

  if (!metadata) {
    // åˆ›å»ºæ–°çš„å…ƒæ•°æ®
    metadata = {
      projectId: projectPath,
      name: gdProject.getName(),
      description: gdProject.getDescription(),
      gameType: 'other',
      tags: [],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
      lastOpened: new Date().toISOString(),
      favorite: false,
      category: 'æˆ‘çš„é¡¹ç›®',
      resources: ResourceAnalyzer.analyzeProjectResources(gdProject),
      projectPath: projectPath
    };
    MetadataStorage.saveProject(metadata);
  } else {
    // æ›´æ–°æœ€åæ‰“å¼€æ—¶é—´å’Œèµ„æºç»Ÿè®¡
    metadata.lastOpened = new Date().toISOString();
    metadata.resources = ResourceAnalyzer.analyzeProjectResources(gdProject);
    MetadataStorage.saveProject(metadata);
  }

  setCurrentProject(metadata);
};
```

## ç¬¬ä¸ƒæ­¥ï¼šè‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ¸¸æˆç±»å‹

åœ¨ `src/GameProjectManager/constants.js` ä¸­ä¿®æ”¹ `GAME_TYPES`ï¼š

```javascript
export const GAME_TYPES = {
  action: {
    name: 'åŠ¨ä½œæ¸¸æˆ',
    icon: 'âš”ï¸',
    color: '#FF5722',
    description: 'å¼ºè°ƒæ“ä½œæŠ€å·§å’Œååº”é€Ÿåº¦çš„æ¸¸æˆ',
  },
  // æ·»åŠ æ›´å¤šç±»å‹...
};
```

### ä¿®æ”¹èµ„æºç±»å‹

åœ¨ `src/GameProjectManager/constants.js` ä¸­ä¿®æ”¹ `RESOURCE_TYPES`ï¼š

```javascript
export const RESOURCE_TYPES = {
  image: {
    name: 'å›¾ç‰‡',
    icon: 'ğŸ–¼ï¸',
    extensions: ['.png', '.jpg', '.jpeg', '.webp'],
    description: 'å›¾ç‰‡èµ„æº',
  },
  // æ·»åŠ æ›´å¤šç±»å‹...
};
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¯¼å‡ºé¡¹ç›®å…ƒæ•°æ®ï¼Ÿ

```javascript
const jsonData = MetadataStorage.exportData();
// ä¿å­˜åˆ°æ–‡ä»¶
const blob = new Blob([jsonData], { type: 'application/json' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = 'project-metadata.json';
a.click();
```

### Q: å¦‚ä½•å¯¼å…¥é¡¹ç›®å…ƒæ•°æ®ï¼Ÿ

```javascript
// ä»æ–‡ä»¶è¯»å–
const file = event.target.files[0];
const reader = new FileReader();
reader.onload = (e) => {
  const jsonData = e.target.result;
  const success = MetadataStorage.importData(jsonData);
  if (success) {
    console.log('å¯¼å…¥æˆåŠŸ');
  }
};
reader.readAsText(file);
```

### Q: å¦‚ä½•æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼Ÿ

```javascript
MetadataStorage.clearAll();
```

## ä¸‹ä¸€æ­¥

- é˜…è¯» `æ”¹é€ æ–¹æ¡ˆ.md` äº†è§£è¯¦ç»†çš„è®¾è®¡æ€è·¯
- é˜…è¯» `é›†æˆæŒ‡å—.md` äº†è§£å¦‚ä½•æ·±åº¦é›†æˆåˆ° GDevelop
- æŸ¥çœ‹æºä»£ç äº†è§£å®ç°ç»†èŠ‚

## è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- æ”¹é€ æ–¹æ¡ˆæ–‡æ¡£
- æºä»£ç æ³¨é‡Š
- GDevelop å®˜æ–¹æ–‡æ¡£
